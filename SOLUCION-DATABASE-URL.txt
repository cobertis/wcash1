================================================================
SOLUCI√ìN: PM2 no lee el archivo .env
================================================================

PROBLEMA:
  PM2 inici√≥ la app pero DATABASE_URL no se carg√≥ del .env
  
SOLUCI√ìN:
  Ya arregl√© start-pm2.sh para que cargue las variables del .env

================================================================
EJECUTA EN TU SERVIDOR:
================================================================

cd /root/wcash

# 1. Descargar el archivo start-pm2.sh arreglado
# (O ed√≠talo manualmente, ver abajo)

# 2. Detener PM2
pm2 delete walgreens-scanner

# 3. Reiniciar con el script arreglado
./start-pm2.sh

# 4. Verificar
curl http://localhost:5000/health

# 5. Ver logs (NO debe mostrar error de DATABASE_URL)
pm2 logs walgreens-scanner

================================================================
O EDITA MANUALMENTE start-pm2.sh:
================================================================

nano start-pm2.sh

Agrega DESPU√âS de "echo PM2 START" y ANTES de "pm2 delete":

# Cargar variables de entorno del .env
if [ -f .env ]; then
    echo "üìã Cargando variables de entorno desde .env..."
    export $(cat .env | grep -v '^#' | xargs)
else
    echo "‚ö†Ô∏è  Archivo .env no encontrado"
fi

Y cambia la √∫ltima l√≠nea de:
  pm2 start ecosystem.config.cjs --env production

A:
  pm2 start ecosystem.config.cjs --update-env

Guardar: Ctrl+O, Enter, Ctrl+X

================================================================
DESPU√âS DE APLICAR EL FIX:
================================================================

cd /root/wcash
pm2 delete walgreens-scanner
./start-pm2.sh
curl http://localhost:5000/health

DEBE RETORNAR:
  {"status":"ok","timestamp":"...","uptime":...}

================================================================
